<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!--모바일 브라우저 뷰 포인트-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0" />
    <meta http-equiv="imagetoolbar" content="no" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="pragma" content="no-cache" />
    <title>Offline Meeting Gathering(OMG) | 오마이갓</title>
    <link rel="icon" type="image/png" href="https://s3.ap-northeast-2.amazonaws.com/img.castlejun-2.shop/UOMG_LOGO.png" />
    <link rel="stylesheet" href="/css/main.css" />
    <link href="/js/fullcalendar/main.css" rel="stylesheet" />
    <script src="/js/fullcalendar/main.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
  </head>
  <body>
    <header id="header">
      <div class="header-top">
        <nav id="header-wrap" class="header-box">
          <div id="header-logo">
            <img
              src="https://s3.ap-northeast-2.amazonaws.com/img.castlejun-2.shop/UOMG_LOGO.png"
              id="header-logo-img"
              onclick="window.location.href='/';"
            />
            <img
              src="https://s3.ap-northeast-2.amazonaws.com/img.castlejun-2.shop/UOMG_LOGO.png"
              id="header-logo-m-img"
              onclick="window.location.href='/';"
            />
          </div>
          <div id="header-show-btn"></div>
          <div id="nav-list-btn"></div>
          <ul id="header-nav">
            <li>
              <a class="header-nav-btn" href="/"><span>홈</span></a>
            </li>
            <li>
              <a class="header-nav-btn" href="/meetings/game"><span>게임</span></a>
            </li>
            <li>
              <a class="header-nav-btn" href="/meetings/dating"><span>소개팅</span></a>
            </li>
            <li>
              <a class="header-nav-btn" href="/meetings/sports"><span>스포츠</span></a>
            </li>
            <li>
              <a class="header-nav-btn" href="/meetings/study"><span>스터디</span></a>
            </li>
            <li>
              <a class="header-nav-btn" href="/meetings/hobby"><span>취미</span></a>
            </li>
          </ul>
          <ul id="header-user-box">
            <li>
              <a class="header-nav-btn" href="/users/logout"><span>로그아웃</span></a>
            </li>
            <li>
              <a class="header-nav-btn home" href="/users/my-page"><span>마이 페이지</span></a>
            </li>
          </ul>
        </nav>
      </div>
    </header>
    <div id="side-mask" style="display: none">
      <div id="side-menuBar" style="right: -300px">
        <div id="side-top">
          <div class="side-top-user-box">
            <span id="side-user-name" onclick="window.location.href='/users/my-page'" style="cursor: pointer">
              <b style="font-weight: 700"><%= user.email %></b>
            </span>
          </div>
        </div>
        <ul id="side-nav">
          <li>
            <a class="side-nav-btn" href="/"><span>홈</span></a>
          </li>
          <li>
            <a class="side-nav-btn" href="/meetings/game"><span>게임</span></a>
          </li>
          <li>
            <a class="side-nav-btn" href="/meetings/dating"><span>소개팅</span></a>
          </li>
          <li>
            <a class="side-nav-btn" href="/meetings/sports"><span>스포츠</span></a>
          </li>
          <li>
            <a class="side-nav-btn" href="/meetings/study"><span>스터디</span></a>
          </li>
          <li>
            <a class="side-nav-btn" href="/meetings/hobby"><span>취미</span></a>
          </li>
          <li>
            <a class="side-nav-btn home" href="/users/my-page"><span>마이 페이지</span></a>
          </li>
          <li>
            <a class="side-nav-btn" href="/users/logout"><span>로그아웃</span></a>
          </li>
        </ul>
      </div>
    </div>
    <div class="body-container">
      <div class="main-container">
        <div role="main">
          <div class="board" id="content">
            <div class="main-content">
              <div class="body-content">
                <article class="contents width-max">
                  <div class="content-title">
                    <h2 class="mp">MY PAGE</h2>
                  </div>
                </article>
                <article class="contents width-xl">
                  <div class="content-wrapper min-height-large">
                    <div class="content-aside mypage">
                      <div class="user-name">
                        <div class="" style="display: inline-block; margin: 0 auto; vertical-align: middle">
                          <span class="user-profile"><img src="<%= user.imageUrl %>" /></span>
                        </div>
                        <div class="" style="display: inline-block; margin: 0 auto">
                          <a href="/users/my-page"><span><%= user.name %></span></a>
                        </div>
                      </div>
                      <div class="cal">
                        <h2 class="cal-title">만남정보</h2>
                        <a href="/users/my-page/meet-management" class="cal-btn">만남 관리</a>
                        <a href="/users/my-page/meeting-calender" class="cal-btn home">만남 일정</a>
                      </div>
                      <div class="cal">
                        <h2 class="cal-title">나의정보</h2>
                        <a href="/users/my-page/profile-management" class="cal-btn">프로필 관리</a>
                        <a href="/users/delete" class="cal-btn">회원탈퇴</a>
                      </div>
                      <div class="cal" style="border-bottom: 1px solid #e1e1e1">
                        <h2 class="cal-title">문의정보</h2>
                        <a href="/users/my-page/inquiry-management" class="cal-btn">등록한 문의</a>
                        <a href="/inquirys" class="cal-btn">1:1 문의</a>
                      </div>
                    </div>
                    <div class="content-main mypage min-height-large show">
                      <div class="user-meeting">
                        <h2 class="cal-title">
                          <span class="userInfo-label">만남 일정</span>
                        </h2>
                        <div id="calendar"></div>
                      </div>
                    </div>
                  </div>
                </article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="footer omg-footer">
      <p>© 2022. OMG ALL RIGHTS RESERVED.</p>
    </div>
    <script type="text/javascript">
      $(function () {
        const calendarEl = $('#calendar')[0];
        $.ajax({
          url: '/users/my-page/meeting-calender-data',
          method: 'GET',
          success: function (response) {
            const schlist = response.map(function (item) {
              return {
                title: item.mainName,
                start: item.date + 'T' + item.time,
                name: item.title,
              };
            });
            calendar = new FullCalendar.Calendar(calendarEl, {
              events: schlist,
              eventTimeFormat: {
                hour: '2-digit',
                minute: '2-digit',
                hour12: false,
              },
              eventClick: function (event) {
                alert(event.event._def.extendedProps.name);
                return false;
              },
            });
            calendar.render();
          },
        });
        $('#header-show-btn').click(function () {
          $('#side-mask').css('display', 'block');
          $('#side-menuBar').css('right', '0px');
          $('#side-menuBar').addClass('visible');
          $('#header').css('right', '16px');
        });
        $('#side-mask').click(function () {
          $('#side-mask').css('display', 'none');
          $('#side-menuBar').css('right', '-300px');
          $('#side-menuBar').removeClass('visible');
          $('#header').css('right', '0');
        });
      });
    </script>
  </body>
</html>
